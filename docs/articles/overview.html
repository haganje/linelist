<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>linelist: package overview â€¢ linelist</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="linelist: package overview">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">linelist</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.2.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/overview.html">linelist: package overview</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/reconhub/linelist">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>linelist: package overview</h1>
            
            <h4 class="date">2019-01-23</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/reconhub/linelist/blob/master/vignettes/overview.Rmd"><code>vignettes/overview.Rmd</code></a></small>
      <div class="hidden name"><code>overview.Rmd</code></div>

    </div>

    
    
<p><em>linelist</em> provides a framework for sensible data standardisation for tabular linelist data commonly used in outbreak analysis. This includes functionality for guessing dates, cleaning non-standard variable names, and defining a data dictionary.</p>
<div id="installing-the-package" class="section level1">
<h1 class="hasAnchor">
<a href="#installing-the-package" class="anchor"></a>Installing the package</h1>
<p>To install the current stable, CRAN version of the package, type:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/install.packages">install.packages</a></span>(<span class="st">"linelist"</span>)</code></pre></div>
<p>To benefit from the latest features and bug fixes, install the development, <em>github</em> version of the package using:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">devtools::<span class="kw">install_github</span>(<span class="st">"reconhub/linelist"</span>)</code></pre></div>
<p>Note that this requires the package <em>devtools</em> installed.</p>
</div>
<div id="main-visible-functions-of-the-package" class="section level1">
<h1 class="hasAnchor">
<a href="#main-visible-functions-of-the-package" class="anchor"></a>Main visible functions of the package</h1>
<p>The main functions of the package include:</p>
<ul>
<li>
<code><a href="../reference/clean_data.html">clean_data()</a></code> will standardise variable names by removing spaces and extra punctuation, attempt to parse dates with a given tolerance, and convert all characters to the closest ASCII approximation</li>
<li>
<code><a href="../reference/as_linelist.html">as_linelist()</a></code> will convert a data frame to a linelist object, allowing the user to define a data dictionary.</li>
<li>
<code><a href="../reference/epivars.html">epivars()</a></code> defines valid variables to be used in the data dictionary</li>
<li>
<code><a href="../reference/accessors.html">get_var()</a></code> accesses a variable from the linelist</li>
<li>
<code><a href="../reference/accessors.html">set_epivars()</a></code> adds new dictionary definitions to the linelist</li>
</ul>
<p>The linelist data class allows you to define variables that are important to your analysis that make it easy to create situation report templates no matter what the data class is.</p>
<p>As an example, we can use data from the <a href="https://cran.r-project.org/package=outbreaks">outbreaks package</a>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(<span class="st">'outbreaks'</span>)
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(<span class="st">'incidence'</span>)
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(<span class="st">'linelist'</span>)</code></pre></div>
<pre><code>## linelist is loaded with the following global variables in `epivars()`:
## id, date_onset, date_report, gender, age, age_group, geo</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># define the important variables</span>
<span class="kw"><a href="../reference/epivars.html">epivars</a></span>(
        <span class="st">"id"</span>,
        <span class="st">"date_onset"</span>,
        <span class="st">"gender"</span>,
        <span class="st">"age"</span>,
        <span class="st">"outcome"</span>, 
        <span class="st">"date_outcome"</span>, 
        <span class="st">"date_hospitalisation"</span>, 
        <span class="dt">set =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>##  [1] "id"                   "date_onset"           "date_report"         
##  [4] "gender"               "age"                  "age_group"           
##  [7] "geo"                  "outcome"              "date_outcome"        
## [10] "date_hospitalisation"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># convert the data set to a linelist and define the variables</span>
ll &lt;-<span class="st"> </span><span class="kw"><a href="../reference/as_linelist.html">as_linelist</a></span>(outbreaks::fluH7N9_china_2013,
  <span class="st">"outcome"</span> =<span class="st"> "outcome"</span>, 
  <span class="st">"date_outcome"</span> =<span class="st"> "date_of_outcome"</span>, 
  <span class="st">"date_hospitalisation"</span> =<span class="st"> "date_of_hospitalisation"</span>,
  <span class="st">"id"</span> =<span class="st"> "case_id"</span>,
  <span class="st">"date_onset"</span> =<span class="st"> "date_of_onset"</span>,
  <span class="st">"gender"</span> =<span class="st"> "gender"</span>,
  <span class="st">"age"</span> =<span class="st"> "age"</span>
  )</code></pre></div>
<p>The resulting linelist object acts the same as a data frame in every way, but it contains a data dictionary in the metadata:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># These are the same</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(ll)</code></pre></div>
<pre><code>##   case_id date_of_onset date_of_hospitalisation date_of_outcome outcome
## 1       1    2013-02-19                    &lt;NA&gt;      2013-03-04   Death
## 2       2    2013-02-27              2013-03-03      2013-03-10   Death
## 3       3    2013-03-09              2013-03-19      2013-04-09   Death
## 4       4    2013-03-19              2013-03-27            &lt;NA&gt;    &lt;NA&gt;
## 5       5    2013-03-19              2013-03-30      2013-05-15 Recover
## 6       6    2013-03-21              2013-03-28      2013-04-26   Death
##   gender age province
## 1      m  87 Shanghai
## 2      m  27 Shanghai
## 3      f  35    Anhui
## 4      f  45  Jiangsu
## 5      f  48  Jiangsu
## 6      f  32  Jiangsu</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(outbreaks::fluH7N9_china_2013)</code></pre></div>
<pre><code>##   case_id date_of_onset date_of_hospitalisation date_of_outcome outcome
## 1       1    2013-02-19                    &lt;NA&gt;      2013-03-04   Death
## 2       2    2013-02-27              2013-03-03      2013-03-10   Death
## 3       3    2013-03-09              2013-03-19      2013-04-09   Death
## 4       4    2013-03-19              2013-03-27            &lt;NA&gt;    &lt;NA&gt;
## 5       5    2013-03-19              2013-03-30      2013-05-15 Recover
## 6       6    2013-03-21              2013-03-28      2013-04-26   Death
##   gender age province
## 1      m  87 Shanghai
## 2      m  27 Shanghai
## 3      f  35    Anhui
## 4      f  45  Jiangsu
## 5      f  48  Jiangsu
## 6      f  32  Jiangsu</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/get_meta.html">get_meta</a></span>(ll)</code></pre></div>
<pre><code>##                    column               epivar  class hxl
## 1                 case_id                   id factor    
## 2           date_of_onset           date_onset   Date    
## 3 date_of_hospitalisation date_hospitalisation   Date    
## 4         date_of_outcome         date_outcome   Date    
## 5                 outcome              outcome factor    
## 6                  gender               gender factor    
## 7                     age                  age factor    
## 8                province                 &lt;NA&gt; factor</code></pre>
<p>You can use this data dictionary to access variables:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(<span class="kw"><a href="../reference/accessors.html">gender</a></span>(ll))</code></pre></div>
<pre><code>## [1] m m f f f f
## Levels: f m</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(<span class="kw"><a href="../reference/accessors.html">get_var</a></span>(ll, <span class="st">"outcome"</span>))</code></pre></div>
<pre><code>## [1] Death   Death   Death   &lt;NA&gt;    Recover Death  
## Levels: Death Recover</code></pre>
<p>This becomes useful in generating templates where the columns from the incoming data may not be standardised. For example, if you want to generate an incidence curve for the data stratified by gender, you could write something like this:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ic &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/incidence/topics/incidence">incidence</a></span>(<span class="kw"><a href="../reference/accessors.html">date_onset</a></span>(ll), <span class="dt">interval =</span> <span class="st">"week"</span>, <span class="dt">groups =</span> <span class="kw"><a href="../reference/accessors.html">gender</a></span>(ll))</code></pre></div>
<pre><code>## 10 missing observations were removed.</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/plot">plot</a></span>(ic)</code></pre></div>
<p><img src="overview_files/figure-html/ic_gender-1.png" width="700"></p>
<p>Now, if you had a new data set coming into the template, you are prepared:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">old_ll &lt;-<span class="st"> </span>ll
ll &lt;-<span class="st"> </span><span class="kw"><a href="../reference/as_linelist.html">as_linelist</a></span>(outbreaks::mers_korea_2015$linelist,
               <span class="st">"id"</span> =<span class="st"> "id"</span>,
               <span class="st">"age"</span> =<span class="st"> "age"</span>,
               <span class="st">"gender"</span> =<span class="st"> "sex"</span>,
               <span class="st">"date_onset"</span> =<span class="st"> "dt_onset"</span>
              )
ic &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/incidence/topics/incidence">incidence</a></span>(<span class="kw"><a href="../reference/accessors.html">date_onset</a></span>(ll), <span class="dt">interval =</span> <span class="st">"week"</span>, <span class="dt">groups =</span> <span class="kw"><a href="../reference/accessors.html">gender</a></span>(ll))</code></pre></div>
<pre><code>## 27 missing observations were removed.</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/plot">plot</a></span>(ic)</code></pre></div>
<p><img src="overview_files/figure-html/new_data-1.png" width="700"></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#installing-the-package">Installing the package</a></li>
      <li><a href="#main-visible-functions-of-the-package">Main visible functions of the package</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Thibaut Jombart, Zhian N. Kamvar.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
