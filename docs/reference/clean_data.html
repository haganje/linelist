<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Clean a data.frame — clean_data • linelist</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Clean a data.frame — clean_data" />

<meta property="og:description" content="This function applies several cleaning procedures to an input data.frame,
by standardising variable names, labels used categorical variables
(characters of factors), and setting dates to Date objects. Optionally, an
intelligent date search can be used on character strings to extract dates
from various formats mixed with other text. See details for more information." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">linelist</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.2.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/overview.html">linelist: package overview</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/reconhub/linelist">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Clean a data.frame</h1>
    <small class="dont-index">Source: <a href='https://github.com/reconhub/linelist/blob/master/R/clean_data.R'><code>R/clean_data.R</code></a></small>
    <div class="hidden name"><code>clean_data.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>This function applies several cleaning procedures to an input <code>data.frame</code>,
by standardising variable names, labels used categorical variables
(characters of factors), and setting dates to <code>Date</code> objects. Optionally, an
intelligent date search can be used on character strings to extract dates
from various formats mixed with other text. See details for more information.</p>
    
    </div>

    <pre class="usage"><span class='fu'>clean_data</span>(<span class='no'>x</span>, <span class='kw'>sep</span> <span class='kw'>=</span> <span class='st'>"_"</span>, <span class='kw'>force_Date</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>guess_dates</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>error_tolerance</span> <span class='kw'>=</span> <span class='fl'>0.5</span>, <span class='kw'>quiet</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>a <code>data.frame</code></p></td>
    </tr>
    <tr>
      <th>sep</th>
      <td><p>The separator used between words, and defaults to the underscore
<code>_</code>.</p></td>
    </tr>
    <tr>
      <th>force_Date</th>
      <td><p>a <code>logical</code> indicating if <code>POSIXct</code> and <code>POSIXlt</code> objects
should be converted to <code>Date</code> objects; defaults to <code>TRUE</code>; you should use
this if your dates are only precise to the day (i.e. no time information
within days).</p></td>
    </tr>
    <tr>
      <th>guess_dates</th>
      <td><p>a <code>logical</code> indicating if dates should be guessed in
columns storing character strings or <code>factors</code>; this feature is
experimental; see <code><a href='guess_dates.html'>guess_dates()</a></code> for more information.</p></td>
    </tr>
    <tr>
      <th>error_tolerance</th>
      <td><p>a number between 0 and 1 indicating the proportion of
entries which cannot be identified as dates to be tolerated; if this
proportion is exceeded, the original vector is returned, and a message is
issued; defaults to 0.1 (10 percent)</p></td>
    </tr>
    <tr>
      <th>quiet</th>
      <td><p>a logical indicating if messages should be displayed to the
console (<code>TRUE</code>, default); set to <code>FALSE</code> to silence messages</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A <code>data.frame</code> with standardised labels for characters and
factors.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='co'>## make toy data</span>
<span class='no'>onsets</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/as.Date'>as.Date</a></span>(<span class='st'>"2018-01-01"</span>) + <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/sample'>sample</a></span>(<span class='fl'>1</span>:<span class='fl'>10</span>, <span class='fl'>20</span>, <span class='kw'>replace</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
<span class='no'>discharge</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/format'>format</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/as.Date'>as.Date</a></span>(<span class='no'>onsets</span>) + <span class='fl'>10</span>, <span class='st'>"%d/%m/%Y"</span>)
<span class='no'>genders</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"male"</span>, <span class='st'>"female"</span>, <span class='st'>"FEMALE"</span>, <span class='st'>"Male"</span>, <span class='st'>"Female"</span>, <span class='st'>"MALE"</span>)
<span class='no'>gender</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/sample'>sample</a></span>(<span class='no'>genders</span>, <span class='fl'>20</span>, <span class='kw'>replace</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
<span class='no'>case_types</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"confirmed"</span>, <span class='st'>"probable"</span>, <span class='st'>"suspected"</span>, <span class='st'>"not a case"</span>,
                <span class='st'>"Confirmed"</span>, <span class='st'>"PROBABLE"</span>, <span class='st'>"suspected  "</span>, <span class='st'>"Not.a.Case"</span>)
<span class='no'>messy_dates</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/sample'>sample</a></span>(
                 <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"01-12-2001"</span>, <span class='st'>"male"</span>, <span class='st'>"female"</span>, <span class='st'>"2018-10-18"</span>, <span class='st'>"2018_10_17"</span>,
                   <span class='st'>"2018 10 19"</span>, <span class='st'>"// 24//12//1989"</span>, <span class='fl'>NA</span>, <span class='st'>"that's 24/12/1989!"</span>),
                 <span class='fl'>20</span>, <span class='kw'>replace</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
<span class='no'>case</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/factor'>factor</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/sample'>sample</a></span>(<span class='no'>case_types</span>, <span class='fl'>20</span>, <span class='kw'>replace</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>))
<span class='no'>toy_data</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/data.frame'>data.frame</a></span>(<span class='st'>"Date of Onset."</span> <span class='kw'>=</span> <span class='no'>onsets</span>,
                       <span class='st'>"DisCharge.."</span> <span class='kw'>=</span> <span class='no'>discharge</span>,
                       <span class='st'>"GENDER_ "</span> <span class='kw'>=</span> <span class='no'>gender</span>,
                       <span class='st'>"Épi.Case_définition"</span> <span class='kw'>=</span> <span class='no'>case</span>,
                       <span class='st'>"messy/dates"</span> <span class='kw'>=</span> <span class='no'>messy_dates</span>)
<span class='co'>## show data</span>
<span class='no'>toy_data</span></div><div class='output co'>#&gt;    Date.of.Onset. DisCharge.. GENDER_. Épi.Case_définition        messy.dates
#&gt; 1      2018-01-04  14/01/2018   FEMALE            PROBABLE         2018 10 19
#&gt; 2      2018-01-09  19/01/2018   female         suspected      // 24//12//1989
#&gt; 3      2018-01-06  16/01/2018     MALE           suspected             female
#&gt; 4      2018-01-08  18/01/2018     male           Confirmed         2018 10 19
#&gt; 5      2018-01-09  19/01/2018   Female          not a case               male
#&gt; 6      2018-01-02  12/01/2018   FEMALE            probable         2018_10_17
#&gt; 7      2018-01-11  21/01/2018     MALE           Confirmed               male
#&gt; 8      2018-01-04  14/01/2018     male            probable               male
#&gt; 9      2018-01-11  21/01/2018   FEMALE            PROBABLE         2018-10-18
#&gt; 10     2018-01-07  17/01/2018     Male            probable that's 24/12/1989!
#&gt; 11     2018-01-11  21/01/2018     MALE           Confirmed               &lt;NA&gt;
#&gt; 12     2018-01-06  16/01/2018     male           confirmed             female
#&gt; 13     2018-01-05  15/01/2018     male           Confirmed         2018 10 19
#&gt; 14     2018-01-06  16/01/2018   Female           confirmed               male
#&gt; 15     2018-01-11  21/01/2018   female         suspected               female
#&gt; 16     2018-01-04  14/01/2018     male           suspected         2018 10 19
#&gt; 17     2018-01-04  14/01/2018     MALE            probable         2018_10_17
#&gt; 18     2018-01-10  20/01/2018     male          not a case    // 24//12//1989
#&gt; 19     2018-01-03  13/01/2018   FEMALE            PROBABLE that's 24/12/1989!
#&gt; 20     2018-01-10  20/01/2018     MALE          Not.a.Case         01-12-2001</div><div class='input'>

<span class='co'>## clean variable names, store in new object, show results</span>
<span class='no'>clean_data</span> <span class='kw'>&lt;-</span> <span class='fu'>clean_data</span>(<span class='no'>toy_data</span>, <span class='kw'>error_tolerance</span> <span class='kw'>=</span> <span class='fl'>0.1</span>)
<span class='no'>clean_data</span></div><div class='output co'>#&gt;    date_of_onset  discharge gender epi_case_definition       messy_dates
#&gt; 1     2018-01-04 2018-01-14 female            probable        2018_10_19
#&gt; 2     2018-01-09 2018-01-19 female           suspected        24_12_1989
#&gt; 3     2018-01-06 2018-01-16   male           suspected            female
#&gt; 4     2018-01-08 2018-01-18   male           confirmed        2018_10_19
#&gt; 5     2018-01-09 2018-01-19 female          not_a_case              male
#&gt; 6     2018-01-02 2018-01-12 female            probable        2018_10_17
#&gt; 7     2018-01-11 2018-01-21   male           confirmed              male
#&gt; 8     2018-01-04 2018-01-14   male            probable              male
#&gt; 9     2018-01-11 2018-01-21 female            probable        2018_10_18
#&gt; 10    2018-01-07 2018-01-17   male            probable that_s_24_12_1989
#&gt; 11    2018-01-11 2018-01-21   male           confirmed              &lt;NA&gt;
#&gt; 12    2018-01-06 2018-01-16   male           confirmed            female
#&gt; 13    2018-01-05 2018-01-15   male           confirmed        2018_10_19
#&gt; 14    2018-01-06 2018-01-16 female           confirmed              male
#&gt; 15    2018-01-11 2018-01-21 female           suspected            female
#&gt; 16    2018-01-04 2018-01-14   male           suspected        2018_10_19
#&gt; 17    2018-01-04 2018-01-14   male            probable        2018_10_17
#&gt; 18    2018-01-10 2018-01-20   male          not_a_case        24_12_1989
#&gt; 19    2018-01-03 2018-01-13 female            probable that_s_24_12_1989
#&gt; 20    2018-01-10 2018-01-20   male          not_a_case        01_12_2001</div><div class='input'>
<span class='no'>clean_data2</span> <span class='kw'>&lt;-</span> <span class='fu'>clean_data</span>(<span class='no'>toy_data</span>, <span class='kw'>error_tolerance</span> <span class='kw'>=</span> <span class='fl'>0.8</span>)
<span class='no'>clean_data2</span></div><div class='output co'>#&gt;    date_of_onset  discharge gender epi_case_definition messy_dates
#&gt; 1     2018-01-04 2018-01-14 female            probable  2018-10-19
#&gt; 2     2018-01-09 2018-01-19 female           suspected  1989-12-24
#&gt; 3     2018-01-06 2018-01-16   male           suspected        &lt;NA&gt;
#&gt; 4     2018-01-08 2018-01-18   male           confirmed  2018-10-19
#&gt; 5     2018-01-09 2018-01-19 female          not_a_case        &lt;NA&gt;
#&gt; 6     2018-01-02 2018-01-12 female            probable  2018-10-17
#&gt; 7     2018-01-11 2018-01-21   male           confirmed        &lt;NA&gt;
#&gt; 8     2018-01-04 2018-01-14   male            probable        &lt;NA&gt;
#&gt; 9     2018-01-11 2018-01-21 female            probable  2018-10-18
#&gt; 10    2018-01-07 2018-01-17   male            probable  1989-12-24
#&gt; 11    2018-01-11 2018-01-21   male           confirmed        &lt;NA&gt;
#&gt; 12    2018-01-06 2018-01-16   male           confirmed        &lt;NA&gt;
#&gt; 13    2018-01-05 2018-01-15   male           confirmed  2018-10-19
#&gt; 14    2018-01-06 2018-01-16 female           confirmed        &lt;NA&gt;
#&gt; 15    2018-01-11 2018-01-21 female           suspected        &lt;NA&gt;
#&gt; 16    2018-01-04 2018-01-14   male           suspected  2018-10-19
#&gt; 17    2018-01-04 2018-01-14   male            probable  2018-10-17
#&gt; 18    2018-01-10 2018-01-20   male          not_a_case  1989-12-24
#&gt; 19    2018-01-03 2018-01-13 female            probable  1989-12-24
#&gt; 20    2018-01-10 2018-01-20   male          not_a_case  2001-12-01</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    <p>Thibaut Jombart</p>
  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Thibaut Jombart, Zhian N. Kamvar.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

